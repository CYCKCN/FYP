<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="/static/item.css">
    <link href="https://fonts.googleapis.com/css?family=Alatsi&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
</head>

<body>
    <form id="form" method="POST">

        <div class="item-info-card">
            <img src="/view/{{item['itemImg']}}" class="item-img" />

            <div class="item-static-info">
                <p class="item-name">{{item["itemName"]}}</p>
                <p class="item-price">HK${{item["itemPrice"]}}</p>
                <div class="tag-div">
                    <p class="item-cate-tag">{{item["itemCate"]}}</p>
                    <p class="item-quality-tag">unexpendable | Used for 3 monthes</p>
                </div>
                <div class="location-div">
                    <span class="material-symbols-outlined" style="font-size: 24px;">
                        location_on
                    </span>
                    <p class="item-location">
                        {{item["itemPickUp"]}}
                    </p>
                </div>
                <p class="item-info">{{item["itemInfo"]}}</p>
                {% if item["itemStatus"] == "Reserved" %}
                <p style="color: red; font-weight: 600;">RESERVED!!</p>
                {% endif %}
            </div>

            <!-- <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
            <lottie-player src="/static/js/Animation2_25.json" background="transparent" speed="1" class="life2-anim"
                loop autoplay></lottie-player> -->

            <div class="user-div">
                <div>
                    <p class="item-owner">By <span style="font-weight: 600;">{{item["itemOwner"]}}</span></p>
                    <p class="item-time">Deadline: 1 June, 2023 | 14 Days left</p>
                </div>
                
            </div>
        </div>

        <div class="home-top">
            <button class="top-logo" name="Home" value="Home">
                <img src="/static/data/ReUST-logo.jpeg" height="50px" />
                <p class="logo-font">LIFE2</p>
            </button>
            <div class="top-buttons-left">
                {% for c in itemCategories %}
                <button class="individual-button" type="submit" name="category" value="{{c}}">{{c}}</button>
                {% endfor %}
                <button class="individual-button" type="submit" name="category" value="All">All categories</button>
                <!-- <button type="button" class="collapsible">
                    <span class="material-symbols-outlined filter-icon" style="font-size: 30px;">
                        tune
                    </span>
                    <p>Filtering...</p>
                </button> -->
            </div>
            {% if userStatus == True %}
            <div class="top-buttons-right">
                <button class="give-item" name="Create" value="Create-item">Give</button>
                <button type="submit" name="Chat" value="Chat" class="chat-icon">
                    <span class="material-symbols-outlined forum-icon" style="font-size: 30px;">
                        forum
                    </span>
                </button>
                <button class="profile-icon" type="submit" name="Profile" value="Profile">
                    <!-- <span class="material-symbols-outlined" style="font-size: 34px;">
                        account_circle
                    </span> -->
                    <p>{{userName}}</p>
                </button>
            </div>
            {% endif %}
        </div>
        

        <div class="search-div">
            
            <i class="material-icons icon-search" style="font-size: 20px;">search</i>
            <div style="display: flex; flex-direction: row;">
                <input class="search" type="search" name="search-keyword" placeholder="{{search}}" />
                <button class="button-option" type="submit" name="Apply" value="Apply">Search</button>
            </div>
            
        </div>

        <div class="interactive-div">
            <div class="contact-div">
                <div class="owner-div">
                    <span class="material-symbols-outlined account-icon" style="font-size: 34px; color: rgba(0, 0, 0, 0.5);">
                        account_circle
                    </span>
                    <p class="chat-owner">{{item["itemOwner"]}}</p>
                </div>
                
                <button class="chat-btn" name="Bargain" value="Chat">Chat</button>
            </div>

            <!-- <div class="form-popup" id="myForm">
                {% if item["itemStatus"] != "Reserved"%}
                <label for="user-price"><b>Price</b></label>
                <input type="number" placeholder="Enter your intended price" name="user-price">
                {% endif %}
                <label for="user-notes"><b>Notes</b></label>
                <input type="text" placeholder="Any notes for the owner?" name="user-notes">
                <br/>
                <button type="submit" class="btn" name="submit" value="submit">Submit</button>
                <button type="button" class="btn cancel" onclick="closeForm()">Cancel</button>

            </div>

            {% if item["itemStatus"] != "Reserved" %}
            <button type="button" class="interaction-div" id="priceButton" onclick="openForm()">
                <span class="material-symbols-outlined" style="font-size: 50px;">
                    back_hand
                </span>
            </button>
            {% elif item["itemStatus"] == "Reserved" and item["itemReserve"] == bargainBuyer %}
            <button type="button" class="interaction-div" id="priceButton" onclick="openForm()">
                <span class="material-symbols-outlined hand-icon" style="font-size: 50px;">
                    back_hand
                </span>
            </button>
            {% endif %}
            <div class="bargain-timeline">
                <div class="timeline">
                    {% for v in bargainInfo %}
                        {% if v.sendBy == bargainBuyer %}
                        <div class="container right">
                        <div class="content">
                            <h2 style="color: black;">HKD {{v.price}} <span style="font-size: small;">{{v.sendTime}}</span></h2>
                            <p style="color: black;">{{v.notes}}</p>
                            {% if v.Status == "Pending" %}
                                <p style="color: orange;">{{v.Status}}</p>
                            {% elif v.Status == "Decline" %}
                                <p style="color: red;">{{v.Status}}</p>
                            {% elif v.Status == "Agree" %}
                                <p style="color: green;">{{v.Status}}</p>
                            {% else %}
                                <p style="color: black;">{{v.Status}}</p>
                            {% endif %}
                        </div>

                        </div>
                        {% else %}
                        <div class="container left">
                            <div class="content">
                                <h2 style="color: black;"><span style="font-size: small;">{{v.sendTime}}</span></h2>
                                <p style="color: black;">{{v.notes}}</p>
                            </div>
                          </div>
                        {% endif %}
                    {% endfor %}
            </div> -->
        </div>
        
        <script>
            function openForm() {
                document.getElementById("myForm").style.display = "flex";
            }
    
            function closeForm() {
                document.getElementById("myForm").style.display = "none";
            }
        </script>

    </form>
    
    
</body>

</html>